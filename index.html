<html>
<head>
<title>My cowley rd</title>
<style>
.building-list {height:200px; list-style-type:none; white-space:nowrap; display:inline}
.building-list li {width:20%;display:inline-block}
.building-list img {width:100%;vertical-align:middle}
</style>
<script>

// Lazy Loading code from: http://developer.telerik.com/featured/lazy-loading-images-on-the-web/
window.addEventListener("DOMContentLoaded", lazyLoadImages);
window.addEventListener("load", lazyLoadImages);
window.addEventListener("resize", lazyLoadImages);
window.addEventListener("scroll", lazyLoadImages);

function lazyLoadImages() {
  var images = document.querySelectorAll("#main-wrapper img[data-src]"),
      item;
  // load images that have entered the viewport
  [].forEach.call(images, function (item) {
    if (isElementInViewport(item)) {
      item.setAttribute("src",item.getAttribute("data-src"));
      item.removeAttribute("data-src")
    }
  })
  // if all the images are loaded, stop calling the handler
  if (images.length == 0) {
    window.removeEventListener("DOMContentLoaded", lazyLoadImages);
    window.removeEventListener("load", lazyLoadImages);
    window.removeEventListener("resize", lazyLoadImages);
    window.removeEventListener("scroll", lazyLoadImages);
  }
}

// Source: http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport/7557433#7557433
function isElementInViewport (el) {
    var rect = el.getBoundingClientRect();

    return (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */
        rect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */
    );
}

function goRight (el) {
  ml = el.style.marginLeft;
  x="-250";
  if(ml!="") {
    x = parseInt(ml);
  }
  x2 = x-250;
  // TODO: Check we don't fall off the end!
  if (x2 < -2000) {
    x2 = -2000;
  }
  console.log("New X is: " + x2 + " (old was " + x + ")");
  el.style.marginLeft = x2 + "px";
  lazyLoadImages();
}
function goLeft (el) {
  ml = el.style.marginLeft;
  x="0";
  if(ml!="") {
    x = parseInt(ml);
  }
  x2 = x+250;
  if(x2>0) {
    x2=0;
  }
  console.log("New X is: " + x2 + " (old was " + x + ")");
  el.style.marginLeft = x2 + "px";
  lazyLoadImages();
}
</script>

</head>
<body id="main-wrapper">
<h2>North Side (Odd)</h2>
<p style="text-align:center">
<button class="nav" onClick="goLeft(document.getElementById('north-side'));" >&laquo; West</button>
<button class="nav" onClick="goRight(document.getElementById('north-side'));" >East &raquo;</button>
</p>
<ul class="building-list">
	<li><a href="/wiki/index.php?title=51a"><img data-src="./images/51a-2017-01-06.JPG" alt="51a Cowley Road, Oxford" /></a></li>
	<li><a href="/wiki/index.php?title=53"><img data-src="./images/53-2017-01-01.jpg" alt="53 Cowley Road, Oxford" /></a></li>
</ul>
<h2>South Side (Even)</h2>
<p style="text-align:center">
<button class="nav" onClick="goLeft(document.getElementById('south-side'));" >&laquo; East</button>
<button class="nav" onClick="goRight(document.getElementById('south-side'));" >West &raquo;</button>
</p>
<ul id="south-side" class="building-list">
	<li><a href="/wiki/index.php?title=76"><img data-src="./images/76-2016-12.JPG" alt="76 Cowley Road, Oxford"/></a></li>
	<li><a href="/wiki/index.php?title=66"><img data-src="./images/66-2016-12.png" alt="66 Cowley Road, Oxford"/></a></li>
	<li><a href="/wiki/index.php?title=46"><img data-src="./images/46-2016-12.JPG" alt="46 Cowley Road, Oxford"/></a></li>
	<li><a href="/wiki/index.php?title=40"><img data-src="./images/40-2016-12.JPG" alt="40 Cowley Road, Oxford"/></a></li>
	<li><a href="/wiki/index.php?title=38"><img data-src="./images/38-2016-12.JPG" alt="38 Cowley Road, Oxford"/></a></li>
	<li><a href="/wiki/index.php?title=36"><img data-src="./images/36-2016-12.JPG" alt="36 Cowley Road, Oxford"/></a></li>
	<li><a href="/wiki/index.php?title=34"><img data-src="./images/34-2016-12.JPG" alt="34 Cowley Road, Oxford"/></a></li>
	<li><a href="/wiki/index.php?title=south_Cape"><img data-src="./images/south_Cape-2016-12.jpg" alt="south_Cape Cowley Road, Oxford"/></a></li>
</ul>

</body>
